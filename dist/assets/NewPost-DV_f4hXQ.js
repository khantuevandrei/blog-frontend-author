import{r as n,b as g,u as y,j as e,B as m,P as b,T as j,A as C}from"./index-DbtmEfME.js";import{T as c,F as v}from"./FormButton-DkkXtWWz.js";import{B as w}from"./BackButton-7gMYRNk2.js";function k(){const{token:p}=n.useContext(g),s=y(),[t,f]=n.useState({title:"",body:""}),[i,a]=n.useState(null),[h,o]=n.useState(!1);function l(r){f({...t,[r.target.name]:r.target.value})}async function x(r){if(r.preventDefault(),a(null),o(!0),!t.title.trim()||!t.body.trim()){a("Both title and body are required"),o(!1);return}try{const u=await fetch("https://blog-backend-production-16f8.up.railway.app/api/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`bearer ${p}`},body:JSON.stringify(t)}),d=await u.json();if(!u.ok){a(d.message||"Post creation failed");return}s(`/${d.id}`)}catch{a("Network error")}finally{o(!1)}}return e.jsx(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,minHeight:"100%",p:2},children:e.jsxs(b,{elevation:3,sx:{p:4,width:"100%",maxWidth:500,position:"relative"},children:[e.jsx(w,{onClick:()=>s("/")}),e.jsx(j,{variant:"h5",mb:2,sx:{fontWeight:500},children:"Create New Post"}),e.jsxs(m,{component:"form",onSubmit:x,children:[e.jsx(c,{label:"Title",name:"title",margin:"normal",value:t.title,onChange:l,fullWidth:!0,required:!0,sx:{mb:2}}),e.jsx(c,{label:"Body",name:"body",margin:"normal",value:t.body,onChange:l,fullWidth:!0,multiline:!0,rows:6,required:!0}),e.jsx(v,{name:"Create",disabled:h})]}),i&&e.jsx(C,{type:"error",children:i})]})})}export{k as default};
