import{u as C,r as d,j as s,B as P,A as u,T as h,L as F}from"./index-DIF-spbC.js";import{F as S,a as R,P as w}from"./PasswordField-BBsANhO8.js";import{C as f,U as k,P as A}from"./PasswordChecklist-DmTLgD0p.js";import{F as B}from"./FormButton-CA7wgLaE.js";function z(){const g=C(),[r,o]=d.useState({username:null,password:null,response:null}),[x,t]=d.useState(!1),[e,j]=d.useState({username:"",password:"",confirmPassword:""}),m={length:/^.{3,20}$/,validChars:/^[A-Za-z0-9_]+$/},p={length:m.length.test(e.username),validChars:m.validChars.test(e.username)},n={lowercase:/[a-z]/,uppercase:/[A-Z]/,number:/\d/,symbol:/[!@#$%^&*()_\-+=[\]{};:"\\|,.<>/?]/,length:/.{8,}/},c={length:n.length.test(e.password),lowercase:n.lowercase.test(e.password),uppercase:n.uppercase.test(e.password),number:n.number.test(e.password),symbol:n.symbol.test(e.password),passwordsMatch:e.password&&e.password===e.confirmPassword};function i(l){j({...e,[l.target.name]:l.target.value.trim()})}async function b(l){if(l.preventDefault(),o({username:null,password:null,response:null}),t(!0),Object.values(p).some(a=>!a)){t(!1),o(a=>({...a,username:"Please fix username validation errors"}));return}if(Object.values(c).some(a=>!a)){t(!1),o(a=>({...a,password:"Please fix password validation errors"}));return}try{const a=await fetch("https://blog-backend-production-16f8.up.railway.app/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),v=await a.json();if(!a.ok){o(y=>({...y,response:v.message||"Registration failed"})),t(!1);return}g("/login")}catch{o(a=>({...a,response:"Network error"}))}}return s.jsx(P,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1},children:s.jsxs(S,{width:400,name:"Register",onSubmit:b,children:[s.jsx(R,{label:"Username",name:"username",value:e.username,onChange:i}),s.jsx(f,{in:!!e.username,timeout:300,children:s.jsx(k,{validations:p})}),r.username&&s.jsx(u,{type:"error",children:r.username}),s.jsx(w,{label:"Password",name:"password",value:e.password,onChange:i}),s.jsx(w,{label:"Confirm Password",name:"confirmPassword",value:e.confirmPassword,onChange:i}),s.jsx(f,{in:!!(e.password||e.confirmPassword),timeout:300,children:s.jsx(A,{validations:c})}),r.password&&s.jsx(u,{type:"error",children:r.password}),s.jsx(B,{name:"Register",disabled:x}),r.response&&s.jsx(u,{type:"error",children:r.response}),s.jsxs(h,{sx:{mt:2,textAlign:"center",color:"#333",fontSize:14},children:["Already have an account?"," ",s.jsx(h,{component:F,to:"/login",sx:{color:"blue",textDecoration:"none",fontWeight:500,"&:hover":{textDecoration:"underline"}},children:"Login"})]})]})})}export{z as default};
