import{u as f,r as s,a as h,j as e,A as x}from"./index-D2KaLZNc.js";import{F as j,a as w,b}from"./FormButton-D_UYJ-45.js";import{P as v}from"./PasswordField-DTg_QMIC.js";import{A as y}from"./AuthInfo-DDS1bpQo.js";function A(){const m=f(),{login:d}=s.useContext(h),[r,n]=s.useState(null),[c,i]=s.useState(!1),[a,g]=s.useState({username:"",password:""});function l(t){g({...a,[t.target.name]:t.target.value})}async function p(t){t.preventDefault(),n(null),i(!0);try{const u=await fetch("https://blog-backend-production-16f8.up.railway.app/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),o=await u.json();if(!u.ok){n(o.message||"Login failed");return}d(o.token,o.user),m("/")}catch{n("Network error")}finally{i(!1)}}return e.jsxs(j,{width:400,name:"Login",onSubmit:p,children:[e.jsx(w,{label:"Username",name:"username",value:a.username,onChange:l}),e.jsx(v,{label:"Password",name:"password",value:a.password,onChange:l}),e.jsx(x,{error:r,children:r}),e.jsx(b,{name:"Login",disabled:c}),e.jsx(y,{desc:"Dont'have an account?",link:"Register",nav:"/register"})]})}export{A as default};
