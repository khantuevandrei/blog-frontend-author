import{u as f,r as a,a as h,j as e,B as j,A as w,T as c,L as y}from"./index-CfyxJOqM.js";import{F as b,a as v,P as F}from"./PasswordField-Bo2JzFK2.js";import{F as S}from"./FormButton-iVTXcVPX.js";function D(){const d=f(),{login:m}=a.useContext(h),[r,o]=a.useState(null),[p,i]=a.useState(!1),[t,g]=a.useState({username:"",password:""});function l(n){g({...t,[n.target.name]:n.target.value})}async function x(n){n.preventDefault(),o(null),i(!0);try{const u=await fetch("https://blog-backend-production-16f8.up.railway.app/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await u.json();if(!u.ok){o(s.message||"Login failed"),i(!1);return}m(s.token,s.user),d("/")}catch{o("Network error")}}return e.jsx(j,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1},children:e.jsxs(b,{width:400,name:"Login",onSubmit:x,children:[e.jsx(v,{label:"Username",name:"username",value:t.username,onChange:l}),e.jsx(F,{label:"Password",name:"password",value:t.password,onChange:l}),e.jsx(S,{name:"Login",disabled:p}),r&&e.jsx(w,{type:"error",children:r}),e.jsxs(c,{sx:{mt:2,textAlign:"center",color:"#333",fontSize:14},children:["Don't have an account?"," ",e.jsx(c,{component:y,to:"/register",sx:{color:"blue",textDecoration:"none",fontWeight:500,"&:hover":{textDecoration:"underline"}},children:"Register"})]})]})})}export{D as default};
