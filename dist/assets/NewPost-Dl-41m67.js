import{r as o,a as y,u as b,j as e,B as c,P as g,T as j,A as C}from"./index-ecins54h.js";import{c as m,F as v}from"./FormButton-Cp-Fq5tM.js";import{B as w}from"./BackButton-DSHBddhL.js";function P(){const{token:p}=o.useContext(y),s=b(),[t,f]=o.useState({title:"",body:""}),[i,a]=o.useState(null),[h,n]=o.useState(!1);function l(r){f({...t,[r.target.name]:r.target.value})}async function x(r){if(r.preventDefault(),a(null),n(!0),!t.title.trim()||!t.body.trim()){a("Both title and body are required"),n(!1);return}try{const u=await fetch("https://blog-backend-production-16f8.up.railway.app/api/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`bearer ${p}`},body:JSON.stringify(t)}),d=await u.json();if(!u.ok){a(d.message||"Post creation failed");return}s(`/${d.id}`)}catch{a("Network error")}finally{n(!1)}}return e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,minHeight:"100%",p:2,position:"relative"},children:[e.jsx(w,{onClick:()=>s("/")}),e.jsxs(g,{elevation:3,sx:{p:4,width:"100%",maxWidth:500},children:[e.jsx(j,{variant:"h5",mb:2,children:"Create New Post"}),e.jsxs(c,{component:"form",onSubmit:x,children:[e.jsx(m,{label:"Title",name:"title",value:t.title,onChange:l,fullWidth:!0,required:!0,sx:{mb:2}}),e.jsx(m,{label:"Body",name:"body",value:t.body,onChange:l,fullWidth:!0,multiline:!0,rows:6,required:!0}),e.jsx(v,{name:"Create",disabled:h})]}),i&&e.jsx(C,{type:"error",children:i})]})]})}export{P as default};
