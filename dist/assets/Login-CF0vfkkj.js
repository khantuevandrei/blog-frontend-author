import{u as f,a as y,r as n,b as j,j as e,B as w,A as b,T as m,L as v}from"./index-CHYvOylt.js";import{F,a as S,P as C}from"./PasswordField-SPMNbbfb.js";import{F as L}from"./FormButton-Dodv37vY.js";function D(){const p=f(),o=y(),{login:d}=n.useContext(j),[i,s]=n.useState(null),[g,l]=n.useState(!1),[t,h]=n.useState({username:"",password:""});function c(a){h({...t,[a.target.name]:a.target.value})}async function x(a){a.preventDefault(),s(null),l(!0);try{const u=await fetch("https://blog-backend-production-16f8.up.railway.app/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await u.json();if(!u.ok){s(r.message||"Login failed"),l(!1);return}d(r.token,r.user),p("/")}catch{s("Network error")}}return e.jsx(w,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1},children:e.jsxs(F,{width:400,name:"Login",onSubmit:x,children:[e.jsx(S,{label:"Username",name:"username",value:t.username,onChange:c}),e.jsx(C,{label:"Password",name:"password",value:t.password,onChange:c}),e.jsx(L,{name:"Login",disabled:g}),i&&e.jsx(b,{type:"error",children:i}),e.jsxs(m,{sx:{mt:2,textAlign:"center",color:o.palette.text.secondary,fontSize:14},children:["Don't have an account?"," ",e.jsx(m,{component:v,to:"/register",sx:{color:o.palette.primary.main,textDecoration:"none",fontWeight:600,"&:hover":{color:o.palette.primary.light}},children:"Register"})]})]})})}export{D as default};
