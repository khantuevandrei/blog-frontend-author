import{r,a as h,u as b,j as e,A as g}from"./index-D2KaLZNc.js";import{F as x,a as y,b as j}from"./FormButton-D_UYJ-45.js";import{B as C}from"./BackButton-BbDVQbHQ.js";import{B as v}from"./BodyField-DVSrKaLV.js";function k(){const{token:d}=r.useContext(h),m=b(),[t,c]=r.useState({title:"",body:""}),[s,a]=r.useState(null),[f,n]=r.useState(!1);function i(o){c({...t,[o.target.name]:o.target.value})}async function p(o){if(o.preventDefault(),a(null),n(!0),!t.title.trim()||!t.body.trim()){a("Both title and body are required"),n(!1);return}try{const l=await fetch("https://blog-backend-production-16f8.up.railway.app/api/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`bearer ${d}`},body:JSON.stringify(t)}),u=await l.json();if(!l.ok){a(u.message||"Post creation failed");return}m(`/${u.id}`)}catch{a("Network error")}finally{n(!1)}}return e.jsxs(x,{width:600,name:"Create New Post",onSubmit:p,children:[e.jsx(C,{nav:"/"}),e.jsx(y,{label:"Title",name:"title",value:t.title,onChange:i}),e.jsx(v,{value:t.body,onChange:i}),e.jsx(g,{error:s,children:s}),e.jsx(j,{name:"Create",disabled:f})]})}export{k as default};
